@model IEnumerable<CatForum.Models.Post>

@{
    // Setting the title of the page dynamically
    ViewData["Title"] = "CatForum Home";
}

<h1 class="text-center my-4">Welcome to CatForum!</h1>

<div class="row justify-content-center">
    @foreach (var post in Model) // Loop through each post in the model
    {
        // Construct the image URL if an image file name exists
        string imgUrl = !string.IsNullOrEmpty(post.ImageFileName) ? Url.Content("~/catimages/" + post.ImageFileName) : null;

        <div class="card mb-4 shadow-sm" style="max-width: 800px;">
            <!-- Bootstrap card for styling -->
            <div class="card-header bg-primary text-white">
                <!-- Header with a blue background and white text -->
                <h5 class="mb-0">
                    <!-- Link to the post details page, making the title clickable -->
                    <a asp-controller="Home" asp-action="Details" asp-route-id="@post.PostId" class="text-decoration-none text-white">
                        @post.Title
                    </a>
                </h5>
            </div>
            <div class="card-body">
                <!-- Display the post's creation date in a readable format -->
                <p class="text-muted small">Posted on @post.CreatedAt.ToString("MMM dd, yyyy")</p>
                <p class="mb-3">@post.Body</p> <!-- Display the main content of the post -->
                @if (!string.IsNullOrEmpty(post.ImageFileName)) // Check if there's an image for the post
                {
                    <img src="@imgUrl" alt="Post image" class="img-fluid rounded mb-3" style="max-height: 300px; object-fit: cover;">
                }

                <!-- Link to the post details page where users can see comments -->
                <a asp-controller="Home" asp-action="Details" asp-route-id="@post.PostId" class="btn btn-outline-primary">
                    View Post & Comments (@(post.Replies?.Count ?? 0)) <!-- Show comment count, default to 0 if null -->
                </a>
            </div>
        </div>
    }
</div>
